<!DOCTYPE html>
<!-- 
    BJERREDS SALTSJÖBAD - BILDCOLLAGE
    =================================
    
    ╔════════════════════════════════════════════════════════════════════╗
    ║  VIKTIGT: CHECKLISTA VID NY VERSION                                ║
    ╠════════════════════════════════════════════════════════════════════╣
    ║  1. Utveckla i "utveckling" branch (ALDRIG direkt i main!)         ║
    ║  2. Commita och pusha till GitHub                                  ║
    ║  3. Skapa Pull Request och merga till main                         ║
    ║  4. Skapa tag: git tag -a vX.X -m "Version X.X: Beskrivning"       ║
    ║  5. Pusha tag: git push origin vX.X                                ║
    ║  6. SKAPA BACKUP-MAPP: mkdir vX.X                                  ║
    ║     → git show vX.X:index.html | Out-File -Encoding utf8 vX.X/...  ║
    ║     → Gör samma för styles.css och javaScript.js                   ║
    ║  7. Commita och pusha backup-mappen                                ║
    ║  8. Skapa Release på GitHub                                        ║
    ║                                                                    ║
    ║  OBS! Skapa ALLTID backup-mapp (vX.X/) samtidigt som ny version!   ║
    ║  Detta gör det lätt att länka till och visa historiska versioner.  ║
    ╚════════════════════════════════════════════════════════════════════╝
    
    UPPDATERING 2026-01-03 (v1.0):
    - Ändrat CSS och JS-länkar till relativa sökvägar
    - Lagt till video-sektion med inbäddad Twitter-video
    - Lagt till input-ruta för att lägga till egna bilder
    - Lagt till visning av aktuella bilder och väntande bilder (stack)
    - Uppdaterat teknisk dokumentation
    
    UPPDATERING 2026-01-04 (v2.0):
    - Utökat från 10 till 16 bilder
    - Lagt till metadata (datum, tweet-URL) för 7 bilder
    - Tooltip vid hover visar bildens datum
    - Inledande text som beskriver collaget
    
    UPPDATERING 2026-01-04 (v2.2):
    - Lagt till GitHub-info box med kort introduktion
    - Lagt till versionsbadge som hämtar senaste version från GitHub API
    - Visar versionsnummer och release-datum automatiskt
    
    UPPDATERING 2026-01-04 (v2.4):
    - Lagt till versioner.html med komplett Git/GitHub dokumentation
    - Lagt till "Versioner & Git-guide" knapp
    - Skapat versionsmappar /v1.0/, /v2.0/ och /v2.2/ för historiska versioner
    - Dokumenterat GitHub Pages och hur versioner hanteras
    
    UPPDATERING 2026-01-04 (v2.5):
    - Skapat GitHub Wiki med 9 dokumentationssidor
    - Wiki-sidor: Home, Bildhantering, localStorage, X API, Git Grunderna,
      Arbetsflöde med branches, Tags och Releases, GitHub Pages, Lightbox
    - Följt nytt arbetsflöde: utveckling branch → PR → merge → tag
    - BACKUP-MAPP: /v2.5/ skapad efter merge
-->
<html lang="sv">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bjerreds Saltsjöbad - Bildcollage</title>
    <!-- Länk till extern CSS-fil för styling -->
    <!-- UPPDATERING 2026-01-03: Ändrad från felaktig absolut sökväg till relativ sökväg -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Huvudcontainer för hela sidan -->
    <div class="container">
        
        <!-- Sidhuvud med titel och information -->
        <header>
            <h1>Bjerreds Saltsjöbad</h1>
            <p class="subtitle">Bilder från #Bjerredssaltsjobad</p>
            <!-- Länk till Kent Lundgrens X-konto som källa -->
            <p class="source">Källa: <a href="https://x.com/search?q=%23Bjerredssaltsjobad%20(from%3Akentlundgren)&src=typed_query&f=top" target="_blank" rel="noopener noreferrer">@kentlundgren på X</a></p>
        </header>

        <!-- UPPDATERING 2026-01-04: Inledande beskrivning av bildcollaget -->
        <!-- UPPDATERING 2026-01-04: Lagt till GitHub-info och versionsnummer -->
        <div class="github-info-box">
            <div class="version-badge" id="versionBadge" title="Laddar version...">
                <span class="version-icon">🏷️</span>
                <span id="versionText">Laddar...</span>
            </div>
            <p class="github-intro">
                <strong>Open Source på GitHub</strong> — Detta program är öppen källkod och finns på 
                <a href="https://github.com/lundgren9/Twitter" target="_blank" rel="noopener noreferrer">GitHub</a>. 
                Där kan du ladda ner koden, läsa dokumentation, och se hur programmet utvecklats. 
                Git och GitHub gör det möjligt att dela kod, samarbeta och hantera olika versioner på ett kontrollerat sätt.
                <a href="https://github.com/lundgren9/Twitter#readme" target="_blank" rel="noopener noreferrer">Läs mer i README →</a>
            </p>
        </div>

        <p class="intro-text">
            Här presenteras <strong>nio (9) bilder</strong> växelvis, av totalt <strong>16 bilder</strong>. 
            Bilderna byts ut automatiskt var 4:e sekund. 
            <em>Håll muspekaren över en bild för att se datum.</em>
        </p>

        <!-- Rutnät för bildcollage - 3x3 bilder -->
        <div class="image-grid" id="imageGrid">
            <!-- 9 bildplatser som fylls dynamiskt via JavaScript -->
            <!-- Varje img-element har en alt-text för tillgänglighet -->
            <!-- UPPDATERING 2026-01-03: Tog bort felaktiga src-sökvägar. JavaScript fyller i dessa dynamiskt. -->
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 1" id="img1"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 2" id="img2"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 3" id="img3"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 4" id="img4"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 5" id="img5"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 6" id="img6"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 7" id="img7"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 8" id="img8"></div>
            <div class="image-slot"><img src="" alt="Bjerreds Saltsjöbad bild 9" id="img9"></div>
        </div>

        <!-- UPPDATERING 2026-01-03: Video-sektion med inbäddad Twitter-video -->
        <section class="video-section">
            <h2>🎬 Video från Bjerreds Saltsjöbad</h2>
            <div class="video-container">
                <!-- Twitter oEmbed - videon laddas via Twitter's widget.js -->
                <blockquote class="twitter-tweet" data-media-max-width="560">
                    <a href="https://twitter.com/kentlundgren/status/1991876902991343647"></a>
                </blockquote>
            </div>
            <p class="video-note">Videon laddas från X/Twitter. Om den inte visas, 
                <a href="https://x.com/kentlundgren/status/1991876902991343647" target="_blank">klicka här för att se den på X</a>.
            </p>
        </section>

        <!-- UPPDATERING 2026-01-03: Input-sektion för att lägga till egna bilder -->
        <section class="add-image-section">
            <h2>➕ Lägg till egna bilder</h2>
            <p class="section-description">Klistra in en bild-URL för att lägga till den i rotationen. Bilderna sparas i din webbläsare.</p>
            <div class="input-container">
                <input type="text" 
                       id="imageUrlInput" 
                       placeholder="https://exempel.com/bild.jpg"
                       aria-label="Bild-URL">
                <button id="addImageBtn" class="add-btn">Lägg till</button>
            </div>
            <div id="inputMessage" class="input-message" style="display: none;"></div>
        </section>

        <!-- UPPDATERING 2026-01-03: Sektion som visar bildstatus -->
        <section class="image-status-section">
            <div class="status-grid">
                <!-- Visar de 9 bilder som visas just nu -->
                <div class="status-box current-images">
                    <h3>🖼️ Visas nu (9 bilder)</h3>
                    <ul id="currentImagesList" class="image-list"></ul>
                </div>
                
                <!-- Visar bilder som väntar i stacken -->
                <div class="status-box stack-images">
                    <h3>📚 I kö (stack)</h3>
                    <ul id="stackList" class="image-list"></ul>
                </div>
                
                <!-- Visar användarens egna tillagda bilder -->
                <div class="status-box user-images">
                    <h3>👤 Dina tillagda bilder</h3>
                    <ul id="userImagesList" class="image-list"></ul>
                </div>
            </div>
        </section>

        <!-- Knappar för dokumentation -->
        <!-- UPPDATERING 2026-01-03: Lagt till README-knapp som länkar till GitHub -->
        <!-- UPPDATERING 2026-01-04: Lagt till Versioner-knapp -->
        <!-- UPPDATERING 2026-01-04 (v2.5): Lagt till Wiki-knapp -->
        <div class="tech-button-container">
            <button class="tech-button" id="openModal">
                <span class="tech-icon">⚙️</span> Teknisk Dokumentation
            </button>
            <a href="https://github.com/lundgren9/Twitter" 
               target="_blank" 
               rel="noopener noreferrer"
               class="tech-button readme-button"
               title="README.md är en dokumentationsfil som beskriver projektet. Den visas automatiskt på GitHub och innehåller: projektbeskrivning, installationsguide, användningsinstruktioner och tekniska detaljer. Öppnas i ny flik.">
                <span class="tech-icon">📖</span> README på GitHub
            </a>
            <a href="versioner.html" 
               class="tech-button versions-button"
               title="Se tidigare versioner av programmet, lär dig om Git och GitHub, och hur versionshantering fungerar.">
                <span class="tech-icon">📚</span> Versioner & Git-guide
            </a>
            <a href="https://github.com/lundgren9/Twitter/wiki" 
               target="_blank" 
               rel="noopener noreferrer"
               class="tech-button wiki-button"
               title="GitHub Wiki med 9 dokumentationssidor. Här förklaras hur programmet fungerar, Git-kommandon, localStorage, och mycket mer. Wiki ligger i ett eget Git-repository och kan redigeras direkt på GitHub.">
                <span class="tech-icon">📖</span> Wiki (9 sidor)
            </a>
        </div>

    </div>

    <!-- Modal-fönster för teknisk dokumentation -->
    <!-- Dolt som standard, visas när användaren klickar på knappen -->
    <div id="techModal" class="modal">
        <div class="modal-content">
            
            <!-- Stängknapp för modalen -->
            <span class="close">×</span>
            
            <!-- Innehåll i modal-fönstret -->
            <h2>Teknisk Dokumentation</h2>
            <p class="modal-intro">Förklaring av hur bildcollaget fungerar, inklusive video-inbäddning och input-funktionalitet.</p>
            
            <!-- UPPDATERING 2026-01-03: Uppdaterad dokumentation -->
            
            <!-- Nuvarande implementation -->
            <h3>1. Nuvarande Implementation</h3>
            <p>Applikationen visar bilder från Twitter/X med hashtag #Bjerredssaltsjobad. Bilderna roterar automatiskt var 4:e sekund med fade-in/fade-out effekter.</p>
            
            <h4>Teknisk uppbyggnad:</h4>
            <ul>
                <li><strong>HTML:</strong> Strukturerar sidan med 3×3 rutnät för bilder, video-sektion, input-ruta och bildlistor</li>
                <li><strong>CSS:</strong> Responsiv design med CSS Grid, animationer och modern styling</li>
                <li><strong>JavaScript:</strong> Hanterar bildväxling, localStorage, input-validering och Twitter widget</li>
            </ul>

            <div class="info-box">
                <p><strong>📸 Bildkällor:</strong></p>
                <ul>
                    <li>10 bilder från @kentlundgren på X/Twitter</li>
                    <li>Möjlighet att lägga till egna bilder via input-rutan</li>
                    <li>Användarbilder sparas i webbläsarens localStorage</li>
                </ul>
            </div>

            <!-- UPPDATERING 2026-01-03: Ny sektion om video-inbäddning -->
            <h3>2. Video-inbäddning (Twitter oEmbed)</h3>
            <p>Videon från Bjerreds Saltsjöbad bäddas in via Twitter's officiella embed-system.</p>
            
            <h4>2.1 Hur det fungerar:</h4>
            <ol>
                <li><strong>HTML-kod:</strong> En <code>&lt;blockquote class="twitter-tweet"&gt;</code> med länk till tweeten</li>
                <li><strong>Twitter Widget:</strong> Scriptet <code>widgets.js</code> från Twitter laddas</li>
                <li><strong>Rendering:</strong> Twitter's script ersätter blockquote med en interaktiv video-spelare</li>
            </ol>

            <h4>2.2 Exempel på embed-kod:</h4>
            <pre><code>&lt;blockquote class="twitter-tweet"&gt;
    &lt;a href="https://twitter.com/kentlundgren/status/1991876902991343647"&gt;&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js"&gt;&lt;/script&gt;</code></pre>

            <h4>2.3 Begränsningar:</h4>
            <div class="warning">
                <ul>
                    <li>⚠️ Kräver internetanslutning för att ladda videon</li>
                    <li>⚠️ Beroende av Twitter's servrar och widget.js</li>
                    <li>⚠️ Kan blockeras av annonsblockerare eller privacy-tillägg</li>
                </ul>
            </div>

            <!-- UPPDATERING 2026-01-03: Ny sektion om input-rutan -->
            <h3>3. Input-ruta för bilder</h3>
            <p>Användare kan lägga till egna bilder som automatiskt ingår i rotationen.</p>

            <h4>3.1 Så fungerar det:</h4>
            <ol>
                <li>Användaren klistrar in en bild-URL i input-fältet</li>
                <li>JavaScript validerar att det är en giltig URL (börjar med http/https)</li>
                <li>Bilden läggs till i <code>imagePool</code>-arrayen</li>
                <li>Bilden sparas till <code>localStorage</code> för att finnas kvar vid nästa besök</li>
                <li>Bildlistorna uppdateras för att visa den nya bilden</li>
            </ol>

            <h4>3.2 localStorage - Lokal lagring utan backend</h4>
            <div class="info-box">
                <p><strong>Varför localStorage?</strong></p>
                <p>localStorage är en inbyggd funktion i webbläsaren som låter JavaScript spara data lokalt på användarens dator. Fördelar:</p>
                <ul>
                    <li>✅ <strong>Ingen backend krävs</strong> - allt körs i webbläsaren</li>
                    <li>✅ <strong>Data finns kvar</strong> även efter att sidan stängs</li>
                    <li>✅ <strong>Enkelt att implementera</strong> med <code>localStorage.setItem()</code> och <code>getItem()</code></li>
                    <li>⚠️ <strong>Begränsning:</strong> Data finns endast i den webbläsaren där det sparades</li>
                </ul>
            </div>

            <h4>3.3 Kod-exempel för localStorage:</h4>
            <pre><code>// Spara bilder
function saveUserImages(images) {
    localStorage.setItem('bjerred_user_images', JSON.stringify(images));
}

// Ladda bilder
function loadSavedImages() {
    const saved = localStorage.getItem('bjerred_user_images');
    return saved ? JSON.parse(saved) : [];
}</code></pre>

            <!-- UPPDATERING 2026-01-03: Ny sektion om bildlistor -->
            <h3>4. Bildlistor och "Stack"</h3>
            <p>Sidan visar tre listor för att ge överblick över bilderna:</p>

            <h4>4.1 "Visas nu" (9 bilder)</h4>
            <p>Visar vilka 9 bilder som för tillfället visas i 3×3-rutnätet. Uppdateras automatiskt var 4:e sekund när en bild byts ut.</p>

            <h4>4.2 "I kö" (stack)</h4>
            <p>Visar bilder som väntar på att visas. När en bild byts ut i rutnätet hämtas nästa bild från denna kö.</p>
            <div class="info-box">
                <p><strong>Hur stacken fungerar:</strong></p>
                <ul>
                    <li>Alla bilder i <code>imagePool</code> som inte visas just nu är "i kö"</li>
                    <li>Bilder hämtas sekventiellt (en efter en) från poolen</li>
                    <li>När alla bilder visats börjar det om från början</li>
                </ul>
            </div>

            <h4>4.3 "Dina tillagda bilder"</h4>
            <p>Visar bilder som användaren själv lagt till via input-rutan. Dessa kan tas bort genom att klicka på × bredvid bilden.</p>

            <!-- UPPDATERING 2026-01-03: Ny sektion om lightbox och bildmetadata -->
            <h3>5. Lightbox och bildmetadata</h3>
            <p>Klicka på en bild i collaget för att se den i full storlek i en lightbox.</p>

            <h4>5.1 Lightbox-funktioner:</h4>
            <ul>
                <li><strong>Visa hela bilden:</strong> Bilden visas i full storlek utan beskärning</li>
                <li><strong>"Öppna på X":</strong> Länk till originaltweeten (om känd) eller @kentlundgren</li>
                <li><strong>Stäng:</strong> Klicka på × eller tryck Escape</li>
            </ul>

            <h4>5.2 Varför är det svårt att visa datum och tweet-text?</h4>
            <div class="warning">
                <p><strong>⚠️ Problemet med Twitter/X-bilddata:</strong></p>
                <p>När vi har en bild-URL från Twitter (t.ex. <code>pbs.twimg.com/media/ABC123</code>) finns det <strong>ingen koppling tillbaka</strong> till den ursprungliga tweeten.</p>
            </div>

            <div class="info-box">
                <p><strong>Varför är detta svårt?</strong></p>
                <ul>
                    <li>❌ Bild-URL:er innehåller INTE tweet-ID</li>
                    <li>❌ Twitter API:s Free tier tillåter INTE omvänd sökning (bild → tweet)</li>
                    <li>❌ Ingen publik tjänst kan koppla bild-URL till tweet</li>
                    <li>✅ Enda lösningen: Manuellt spara tweet-URL när bilden hämtas</li>
                </ul>
            </div>

            <h4>5.3 Hur vi löst det:</h4>
            <ol>
                <li>Vi lagrar <strong>manuellt</strong> kända tweet-URLs i koden (objektet <code>imageMetadata</code>)</li>
                <li>Om tweet-URL finns → visa "Öppna på X" som går till tweeten</li>
                <li>Om tweet-URL saknas → visa länk till @kentlundgren på X</li>
            </ol>

            <h4>5.4 Framtida lösning:</h4>
            <p>Med X API Basic tier (~$100/månad) skulle man kunna:</p>
            <ul>
                <li>Hämta tweets med bilder automatiskt</li>
                <li>Spara tweet-ID, datum och text tillsammans med varje bild</li>
                <li>Visa fullständig information i lightboxen</li>
            </ul>

            <!-- X/Twitter API information -->
            <h3>6. X/Twitter API - Framtida möjligheter</h3>
            
            <h4>5.1 API-åtkomstnivåer:</h4>
            <div class="info-box">
                <p><strong>Free tier (nuvarande):</strong></p>
                <ul>
                    <li>❌ Kan INTE söka tweets eller hashtags</li>
                    <li>✅ Kan endast posta tweets (1,500/månad)</li>
                    <li>💰 Kostnad: Gratis</li>
                </ul>
            </div>

            <div class="info-box">
                <p><strong>Basic tier (för automatisk bildhämtning):</strong></p>
                <ul>
                    <li>✅ Kan söka tweets med hashtags</li>
                    <li>✅ 10,000 tweets/månad</li>
                    <li>✅ Tillgång till Tweet Search API v2</li>
                    <li>💰 Kostnad: ~$100/månad</li>
                </ul>
            </div>

            <h4>5.2 API-anrop för att hämta bilder automatiskt</h4>
            <p>Med Basic tier skulle följande API-endpoint användas:</p>
            <pre><code>https://api.twitter.com/2/tweets/search/recent?query=%23Bjerredssaltsjobad&max_results=100&expansions=attachments.media_keys&media.fields=url,preview_image_url</code></pre>

            <h4>5.3 CORS och backend-krav</h4>
            <p>X/Twitter API tillåter <strong>inte</strong> direkta anrop från webbläsaren. En backend-server (t.ex. PHP på kentlundgren.se) skulle behövas som proxy.</p>

            <!-- Framtida förbättringar -->
            <h3>7. Framtida Förbättringar</h3>
            <ul>
                <li>Automatisk hämtning av bilder via X API (kräver Basic tier)</li>
                <li>Drag-and-drop för att ladda upp lokala bilder</li>
                <li>Möjlighet att ändra rotationshastigheten</li>
                <li>Fullskärmsläge för bildcollaget</li>
                <li>Dela-funktioner för sociala medier</li>
                <li>Visa datum och tweet-text för alla bilder (kräver manuell datainsamling eller API)</li>
            </ul>

            <!-- Referenser -->
            <h3>8. Referenser</h3>
            <ul class="references">
                <li>X Developer Portal (2025) <em>X API Documentation</em>. Tillgänglig: <a href="https://developer.x.com/en/docs/twitter-api" target="_blank">https://developer.x.com/en/docs/twitter-api</a></li>
                <li>X Developer Portal (2025) <em>Embedded Tweets</em>. Tillgänglig: <a href="https://developer.x.com/en/docs/twitter-for-websites/embedded-tweets/overview" target="_blank">https://developer.x.com/en/docs/twitter-for-websites/embedded-tweets</a></li>
                <li>MDN Web Docs (2025) <em>Window.localStorage</em>. Tillgänglig: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage</a></li>
                <li>MDN Web Docs (2025) <em>CORS - Cross-Origin Resource Sharing</em>. Tillgänglig: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a></li>
            </ul>

        </div>
    </div>

    <!-- UPPDATERING 2026-01-03: Lightbox för att visa bilder i full storlek -->
    <!-- Klicka på en bild i collaget för att öppna lightbox -->
    <div id="imageLightbox" class="lightbox" style="display: none;">
        <div class="lightbox-overlay"></div>
        <div class="lightbox-content">
            <button id="closeLightbox" class="lightbox-close" title="Stäng">×</button>
            <img id="lightboxImage" src="" alt="Fullstor bild">
            <div class="lightbox-actions">
                <a id="openOnXBtn" href="#" target="_blank" rel="noopener noreferrer" class="lightbox-btn">
                    🐦 Öppna på X
                </a>
            </div>
            <div id="lightboxImageInfo" class="lightbox-info" style="display: none;"></div>
        </div>
    </div>

    <!-- Länk till extern JavaScript-fil -->
    <!-- UPPDATERING 2026-01-03: Ändrad från felaktig absolut sökväg till relativ sökväg -->
    <script src="javaScript.js"></script>

</body>
</html>
